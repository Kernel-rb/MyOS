# STEP 1 : 
# Intro :
## Bare Machine:
### Definiton :
    -   is a  computer executing instruction directly on logic hardware without an operating system.
## Freestanding Environment:
    -   To create an os, we need code that does not depend on ant os features.
    -   we call it **freestanding** or **bare-metal**.
## Panic occurs :
    - when the kernel  encounters an unrecoverable error.
    - usually, the kernel prints an error message and halts the system.
## Kernel:
    -   is the core of the operating system.
    -   it is the first program that runs when the computer starts.
    -   it is responsible for managing the system's resources.


### diverging funcitons : 
     -  A function that never returns. 
     -  it's a fucntion who will be used to handle the panic.

### Copy Semantic  : 
     -  The copy semantic is used when we want to copy the value of a variable into another variable.
     - example: 
        ```rust
        let x = 5;
        let y = x;
        println:({}, {} , x, y);
        ```
## In our OS , we don't wanne use the **Structured Exception Handling** (SEH) and **Termination Handling** (TH) bcz Rust  we have an amternative to them.

### Structured Exception Handling : 
    -   is a mechanism to handle exceptions at runtime
    -   there i 2 types of exception on win :
        a - Hardware exception : 
            -   are generated by the processor when an error occurs.
        b - Software exception :
            -   are generated by the application or the operating system. 

### Termination Handling :
    -   is a mechanism to handle the termination of a program.
    -   it is used to release resources and clean up the program's state.

## Compile Time : 
    -   is the period when the program is compiled.

## Run Time 
    -   is the period when the program is running.
    -   it starts when the program is executed and ends when the program is terminated.

## crt0 : 
    -  in Rust , the entry point of the program is the main function.
## name mangling : 
    -   is a technique used by the compiler to encode the names of the functions and variables in the object file.
    -   it is used to avoid name conflicts and to support function overloading.

## Linker Erros : 
    -  Linker is a program that combines the genrated code into an executable program.
    - to Handle the **error** :
        -  **<arch><sub>-<vendor>-<sys>-<env>**,

        -- arch = x86_64, i386, arm, thumb, mips, etc.

        -- sub = for ex. on ARM: v5, v6m, v7a, v7m, etc.

        -- vendor = pc, apple, nvidia, ibm, etc.

        -- sys = none, linux, win32, darwin, cuda, etc.

        -- env = eabi, gnu, android, macho, elf, etc.

## ABI : 
    - application binary interface is an interface between two binary program modules 

# STEP 2 : 
## Boot Process :
    - the first thing:  The ROM (Read-Only Memory) contains the firmware.
    - This code performes a power-on self-test (POST) to check the hardware.
    - In the x86 architecture : 
        a - BIOS (old) => Basic Input/Output System
        b - UEFI (new) => Unified Extensible Firmware Interface
## CPU Modes : 
    - 1 - Real Mode : 
        - 16-bit mode
        - no memory protection
        - no multitasking
    - 2 - Protected Mode : 
        - 32-bit mode
        - memory protection
        - multitasking
    - 3 - Long Mode : 
        - 64-bit mode
        - memory protection
        - multitasking
# STEP 3 :
## VGA Text Mode:
### Definition : 
    -  is a simple way to print text on the screen.
    -  it is used by the BIOS to display the boot messages.
    -  it is also used by the operating system to display the console.
## The VGA text buffer : 
            | Bit(s)   | Value             |
            |----------|------------------ |
            | 0-7      | ASCII code point  |
            | 8-11     | Foreground color  |
            | 12-14    | Background color  |
            | 15       | Blinking bit      |
    - ASCII  is a character encoding standard for electronic communication.

    | Number | Color   | Number + Bright Bit | Bright Color |
    |--------|---------|---------------------|--------------|
    | 0x0    | Black   | 0x8                 | Dark Gray    |
    | 0x1    | Blue    | 0x9                 | Light Blue   |
    | 0x2    | Green   | 0xa                 | Light Green  |
    | 0x3    | Cyan    | 0xb                 | Light Cyan   |
    | 0x4    | Red     | 0xc                 | Light Red    |
    | 0x5    | Magenta | 0xd                 | Pink         |
    | 0x6    | Brown   | 0xe                 | Yellow       |
    | 0x7    | Li-Gray | 0xf                 | White        |

## Memory Mapped I/O : 
    - c est une technique pour communiquer avec les périphériques matériels en utilisant des adresses mémoire.
    - is a technique to communicate with hardware devices using memory addresses.
    - it is used to access the VGA text buffer.
    - the VGA text buffer is located at the address 0xb8000.
    - we can write to this address to display text on the screen.
## Volatile library in Rust : 
    - is a library that provides volatile read and write operations.
    - it is used to access memory-mapped I/O.
    - it is used to prevent the compiler from optimizing away the I/O operations.
### Crates in Rust : 
     - Crates is a collection of Rust source code files.
     - package == crate 
## Formatting Macros : 
    - est une macro qui formate une chaîne de caractères. macro c est une fonction qui génère du code.
## Lazy Statics : 
    - est une variable statique qui est initialisée à l'exécution. par exemple , dans notre cas, on l'utilise pour initialiser le VGA text buffer. 
    - is a static variable that is initialized at runtime.
    - it is used to initialize the VGA text buffer.
## SPIN LOCKS :
    - est une technique pour synchroniser l'accès à une ressource partagée.par exemple, dans notre cas, on l'utilise pour synchroniser l'accès au VGA text buffer. le buffer est partagé entre plusieurs threads. 
    - is a technique to synchronize access to a shared resource.

## Safety: 
    - est une propriété d'un programme qui garantit qu'il ne provoquera pas de comportement indéfini.
    - is a property of a program that guarantees it will not cause undefined behavior.
## println Macro : 
    - est une macro qui imprime une chaîne de caractères sur la console.
    - is a macro that prints a string to the console.
# STEP 4 :
## TEST : 
    - est une fonction qui vérifie si une condition est vraie.
    - is a function that checks if a condition is true.
## Should Panic test : 
    - est un test qui vérifie si une fonction panique.
    - is a test that checks if a function panics.
## Conditon Compilation in Rust : 
    - est une technique pour compiler du code conditionnellemen ( en fonction de la configuration du programme).
    - is a technique to conditionally compile code.

## APM : 
    - est une interface pour gérer l'alimentation de l'ordinateur.
    - is an interface to manage the power of the computer.

## ACPI :
    - est une interface pour gérer l'alimentation de l'ordinateur.
    - is an interface to manage the power of the computer.
## isa-debug-exit : 
    - est une instruction pour arrêter l'exécution du processeur.
    - is an instruction to stop the execution of the processor.

## IO Ports : 
    - est une technique pour communiquer avec les périphériques matériels en utilisant des adresses d'entrée/sortie.
    - is a technique to communicate with hardware devices using input/output addresses.
### 0xf4 :  
    - est un port généralement inutilisé sur l'architecture x86.
    - is generally unused port on the x86 architecture.
### 0x04 :
    - est 4 octets (bytes).
    - is 4 bytes.

## x86_64 Architecture : 
    - est une architecture de processeur 64 bits.
    - is a 64-bit processor architecture.
## Print the Console :
    - pour voir la sortie de la console, nous devons envoyer des données de notre noyau au système hôte.
    - to see the output of the console, we need to send data from our kernel to the host system.
## Serial Port : 
    - est un port de communication série.
    - is a serial communication port.
## Uart 1650 : 
    - est un circuit intégré pour la communication série.
    - is an integrated circuit for serial communication.
## CI service : 
    - est un service qui exécute des tests sur le code source.
    - is a service that runs tests on the source code.
## SSH : 
    - est un protocole pour se connecter à un ordinateur à distance.
    - is a protocol to connect to a computer remotely.
## *Timeouts* : 
    - est un mécanisme pour arrêter une opération après un certain temps.
    - is a mechanism to stop an operation after a certain time.

## Integration Test : 
    - est un test qui vérifie si plusieurs composants fonctionnent ensemble.
    - is a test that checks if multiple components work together.

## Future Tests :
    - **CPU Exceptions**:
        - est un test qui vérifie si le noyau gère les exceptions du processeur.
        - is a test that checks if the kernel handles CPU exceptions.

## Test  Should Panic :
    - est un test qui vérifie si une fonction panique.
    - is a test that checks if a function panics.

# STEP 5 :
## CPU Excepetions :
    - est un test qui vérifie si le noyau gère les exceptions du processeur en cas d'erreur. 
    - is a test that checks if the kernel handles CPU exceptions in case of an error.
### Page Fault :
    - est un test qui vérifie si le noyau gère les erreurs de page.
    - is a test that checks if the kernel handles page errors.##
### invalid opcode : 
    - est un test qui vérifie si le noyau gère les opcodes invalides. ( opcode est une instruction pour le processeur qui spécifie une opération à effectuer par exemple : add, sub, mov, etc.)
    - is a test that checks if the kernel handles invalid opcodes.
####  SSE instructions : 
    - est un test qui vérifie si le noyau gère les instructions SSE invalides. (SSE est une extension du jeu d'instructions x86 pour les processeurs Intel).
    - is a test that checks if the kernel handles invalid SSE instructions.
### General Protection Fault :
    - est un test qui vérifie si le noyau gère les erreurs de protection générale.
    - is a test that checks if the kernel handles general protection errors.
### Double Fault :
    - est un test qui vérifie si le noyau gère les erreurs de double faute ( double fault est une erreur qui se produit lorsque le processeur rencontre une erreur lors du traitement d'une exception).
    - is a test that checks if the kernel handles double fault errors. 

### Triple fault :
    - est un test qui vérifie si le noyau gère les erreurs de triple faute ( triple fault est une erreur qui se produit lorsque le processeur rencontre une erreur lors du traitement d'une double faute).
    - is a test that checks if the kernel handles triple fault errors.

### Breackpoint :
    - est un point d'arrêt dans le code. par exemple, dans notre cas, on l'utilise pour arrêter l'exécution du processeur.
    - is a point in the code where the execution stops. for example, in our case, we use it to stop the execution of the processor.
#### INT 3 :
    - est une instruction pour arrêter l'exécution du processeur.
    - is an instruction to stop the execution of the processor.

### Overflow :
    - est un test qui vérifie si le noyau gère les débordements arithmétiques. par exemple , si on fait une addition et le résultat dépasse la capacité du registre. ( register est un espace mémoire dans le processeur).
    - is a test that checks if the kernel handles arithmetic overflows.if we add two numbers and the result exceeds the capacity of the register. (max value of the register is 2^64-1). 

## The interrupt Descriptor Table (IDT) :
    - est une table qui contient les descripteurs des interruptions. les interruptions sont des signaux envoyés par le matériel ou le logiciel pour interrompre l'exécution du processeur.
    - is a table that contains the interrupt descriptors.
    - interrupts are signals sent by hardware or software to interrupt the execution of the processor.

    -   | Type | Name | Description |
        |------|------|-------------|
        | u16 | Function Pointer [0:15] | The lower bits of the pointer to the handler function. |
        | u16 | GDT selector | Selector of a code segment in the global descriptor table. |
        | u16 | Options | (see below) |
        | u16 | Function Pointer [16:31] | The middle bits of the pointer to the handler function. |
        | u32 | Function Pointer [32:63] | The remaining bits of the pointer to the handler function. |
        | u32 | Reserved | |
        
### When an exception occurs, the processor:
    - 1 - Pushes the error code (if any) onto the stack.
    - 2 - Read the corresponding entry in the IDT.
    - 3 - Check if the entry is present. if not , it triggers a double fault.
    - 4 - Disable hardware interrupts. if the entry is an interrupt gate. (bit 40 not set).
    - 5 - Load the specified GDT selector into the code segment register.
    - 6 - Jump to the handler function.
_In Fr_ :
    - 1 - Pousse le code d'erreur (le cas échéant) sur la pile.
    - 2 - Lit l'entrée correspondante dans l'IDT.
    - 3 - Vérifie si l'entrée est présente. sinon, il déclenche une double faute.
    - 4 - Désactive les interruptions matérielles. si l'entrée est une porte d'interruption. (bit 40 non défini).
    - 5 - Charge le sélecteur GDT spécifié dans le registre de segment de code.
    - 6 - Sauter à la fonction de gestionnaire.

## IDT Type : 
    - est un champ dans l'entrée de la table des descripteurs d'interruption (IDT) qui spécifie le type de la porte d'interruption.
    - is a field in the interrupt descriptor table (IDT) entry that specifies the type of the interrupt gate.